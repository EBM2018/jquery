<style>
#paragraphes p:hover{cursor:pointer;border:1px solid black;}
textarea{display:block;width:100%;}

#paragraphes div {position:relative;}
.poignee{position:absolute;left:0px;cursor:move;}
#paragraphes div {padding-left:20px;}

.emplacement{background-color:lightgrey;border:1px solid black;height:25px;width:100%;}

</style>

<link href="css/ui-darkness/jquery-ui-1.9.2.custom.css" rel="stylesheet">
<script src="js/jquery-1.8.3.js" ></script>
<script src="js/jquery-ui-1.9.2.custom.js"></script>

<script>

$(document).on(	"mouseover","#paragraphes div p, #paragraphes div textarea",
								function(){
	// Survol d'un elt dans le div des p. 
	// $(this) dénote l'élément manipulé 
	// On affiche ses méta-données 
	console.log($(this).data());
});


$(document).ready(function(){
	// Attention : un clic pour déplacer reste un clic sur un P. (permettant d'éditer) 

	// fake meta-data
	$("#paragraphes p").first().data({
		id: 1,
		contenu: "Premier", 
		ordre: 10
	}); 

	$("#paragraphes p").eq(1).data({
		id: 2,
		contenu: "Second", 
		ordre: 20
	}); 

	$("#paragraphes p").eq(2).data({
		id: 3,
		contenu: "Troisieme", 
		ordre: 30
	}); 


	// => On change la structure 
	// 	<div>
	//		<span>poignee</span>
	//		<p>contenu</p>
	//	</div>
	$("#paragraphes").sortable({	
	  handle: ".poignee", 
	  helper: "clone", 	
	  placeholder: "emplacement", 
	  stop: function( event, ui ) {
				console.log("id de l'item modifie : ");
				console.log($("p",ui.item).data("id"));

				console.log("ordre de l'element precedent : ");
				console.log($("p",ui.item.prev()).data("ordre"));

				console.log("ordre de l'element suivant : ");
				console.log($("p",ui.item.next()).data("ordre"));
	  }
	});
	$("#paragraphes").disableSelection(); 
		// Interdit la sélection de texte à la souris




});

</script>
<!-- TODO 
Télécharger jQuery UI 
Charger la lib. JQUERY dans le code de votre exercice 
ATTENTION : utiliser la librairie JQUERY fournie lors du téléchargement de JQUERY UI 

Associer une "poignée" à chaque paragraphe 
QUELLE STRUCTURE pour le glisser-déposer ? 
=> <div><span class="ui-icon ui-icon-triangle-2-n-s"></span> <p> </p> </div>

Permettre le "tri" du paragraphe (opération de type glisser-déposer)
uniquement lorsque l'on se sert de la poignée
-->
<body>
<div id="paragraphes">
	<div>
		<span class="poignee ui-icon ui-icon-triangle-2-n-s">
		</span>
		<p>Premier</p>
	</div>
	<div>
		<span class="poignee ui-icon ui-icon-triangle-2-n-s">
		</span>
		<p>Second</p>
	</div>
	<div>
		<span class="poignee ui-icon ui-icon-triangle-2-n-s">
		</span>
		<p>Troisieme</p>
	</div>
</div>
</body>
